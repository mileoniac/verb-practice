<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verb Practice</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #fff9f0;
    --primary: #ff6b6b;
    --secondary: #ffd93d;
    --accent: #6bcb77;
    --blue: #4d96ff;
    --purple: #c77dff;
    --text: #2d2d2d;
    --card: #ffffff;
    --radius: 20px;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--bg);
    min-height: 100vh;
    color: var(--text);
    padding: 20px;
  }

  h1 {
    font-family: 'Fredoka One', cursive;
    font-size: 2.4rem;
    color: var(--primary);
    text-align: center;
    margin-bottom: 6px;
    letter-spacing: 1px;
  }

  .subtitle {
    text-align: center;
    color: #888;
    font-size: 1rem;
    margin-bottom: 24px;
    font-weight: 600;
  }

  .card {
    background: var(--card);
    border-radius: var(--radius);
    padding: 24px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    margin-bottom: 20px;
  }

  /* SETUP SCREEN */
  #setup-screen label {
    font-weight: 800;
    font-size: 1rem;
    display: block;
    margin-bottom: 8px;
    color: var(--text);
  }

  #setup-screen small {
    display: block;
    color: #aaa;
    font-size: 0.82rem;
    margin-bottom: 10px;
  }

  textarea {
    width: 100%;
    min-height: 160px;
    border: 2.5px solid #e0e0e0;
    border-radius: 14px;
    padding: 14px;
    font-family: 'Nunito', sans-serif;
    font-size: 1rem;
    resize: vertical;
    outline: none;
    transition: border-color 0.2s;
    color: var(--text);
  }

  textarea:focus { border-color: var(--blue); }

  .example-box {
    background: #f0f7ff;
    border-radius: 12px;
    padding: 12px 16px;
    font-size: 0.88rem;
    color: #555;
    margin-top: 12px;
    line-height: 1.7;
  }

  .example-box strong { color: var(--blue); }

  .btn {
    display: block;
    width: 100%;
    padding: 16px;
    border: none;
    border-radius: var(--radius);
    font-family: 'Fredoka One', cursive;
    font-size: 1.3rem;
    cursor: pointer;
    letter-spacing: 0.5px;
    transition: transform 0.15s, box-shadow 0.15s;
  }

  .btn:active { transform: scale(0.97); }

  .btn-start {
    background: var(--primary);
    color: white;
    box-shadow: 0 4px 0 #c94b4b;
    margin-top: 20px;
  }

  .btn-start:hover { box-shadow: 0 6px 0 #c94b4b; transform: translateY(-2px); }

  .btn-blue {
    background: var(--blue);
    color: white;
    box-shadow: 0 4px 0 #2c6fcc;
  }

  .btn-blue:hover { box-shadow: 0 6px 0 #2c6fcc; transform: translateY(-2px); }

  .btn-green {
    background: var(--accent);
    color: white;
    box-shadow: 0 4px 0 #3da34a;
  }

  .btn-green:hover { box-shadow: 0 6px 0 #3da34a; transform: translateY(-2px); }

  .btn-gray {
    background: #e0e0e0;
    color: #666;
    box-shadow: 0 4px 0 #bbb;
    font-size: 1rem;
  }

  /* PRACTICE SCREEN */
  #practice-screen { display: none; }

  .progress-bar-wrap {
    background: #eee;
    border-radius: 50px;
    height: 12px;
    margin-bottom: 20px;
    overflow: hidden;
  }

  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--purple));
    border-radius: 50px;
    transition: width 0.5s ease;
  }

  .progress-label {
    text-align: right;
    font-size: 0.85rem;
    font-weight: 700;
    color: #aaa;
    margin-bottom: 6px;
  }

  .verb-display {
    text-align: center;
    padding: 30px 20px;
    background: linear-gradient(135deg, #fff0f0, #fff8e0);
    border-radius: var(--radius);
    margin-bottom: 24px;
    border: 2.5px dashed #ffd0d0;
  }

  .verb-display .listen-label {
    font-size: 0.85rem;
    font-weight: 700;
    color: #bbb;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 10px;
  }

  .verb-display .verb-word {
    font-family: 'Fredoka One', cursive;
    font-size: 3rem;
    color: transparent;
    background: #ffd0d0;
    border-radius: 12px;
    padding: 4px 24px;
    margin-bottom: 16px;
    user-select: none;
    letter-spacing: 4px;
  }

  .hebrew-hint {
    font-size: 1.3rem;
    font-weight: 800;
    color: var(--purple);
    margin-bottom: 14px;
    min-height: 28px;
    direction: rtl;
  }
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: var(--secondary);
    border: none;
    border-radius: 50px;
    padding: 10px 22px;
    font-family: 'Fredoka One', cursive;
    font-size: 1.1rem;
    cursor: pointer;
    color: #665500;
    box-shadow: 0 3px 0 #c9a800;
    transition: transform 0.1s;
  }

  .speak-btn:active { transform: scale(0.96); }
  .speak-btn .icon { font-size: 1.3rem; }

  .field-group {
    margin-bottom: 18px;
  }

  .field-group label {
    font-weight: 800;
    font-size: 0.9rem;
    margin-bottom: 8px;
    display: block;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #888;
  }

  .field-group label span {
    font-size: 1rem;
    text-transform: none;
    letter-spacing: 0;
    font-weight: 700;
  }

  .answer-input {
    width: 100%;
    padding: 14px 18px;
    border: 2.5px solid #e0e0e0;
    border-radius: 14px;
    font-family: 'Nunito', sans-serif;
    font-size: 1.2rem;
    font-weight: 700;
    outline: none;
    transition: border-color 0.2s, background 0.2s;
    color: var(--text);
    background: white;
  }

  .answer-input:focus { border-color: var(--blue); background: #f7fbff; }
  .answer-input.correct { border-color: var(--accent); background: #f0fff3; }
  .answer-input.wrong { border-color: var(--primary); background: #fff0f0; }

  .feedback {
    font-size: 0.9rem;
    font-weight: 700;
    margin-top: 6px;
    min-height: 22px;
    padding-left: 4px;
  }

  .feedback.correct { color: var(--accent); }
  .feedback.wrong { color: var(--primary); }

  .btn-row {
    display: flex;
    gap: 12px;
    margin-top: 8px;
  }

  .btn-row .btn { margin: 0; }

  /* RESULTS SCREEN */
  #results-screen { display: none; text-align: center; }

  .trophy {
    font-size: 4rem;
    margin: 10px 0;
    animation: bounce 0.8s infinite alternate;
  }

  @keyframes bounce {
    from { transform: translateY(0); }
    to { transform: translateY(-12px); }
  }

  .score-big {
    font-family: 'Fredoka One', cursive;
    font-size: 3rem;
    color: var(--primary);
    margin: 10px 0;
  }

  .score-sub {
    color: #aaa;
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 20px;
  }

  .result-list {
    text-align: left;
    margin: 20px 0;
  }

  .result-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: 12px;
    margin-bottom: 8px;
    font-weight: 700;
    font-size: 0.95rem;
  }

  .result-item.ok { background: #f0fff3; color: #2d7a3a; }
  .result-item.bad { background: #fff0f0; color: #c94b4b; }
  .result-item .ri { font-size: 1.2rem; }
  .result-item .verb-pair { flex: 1; }
  .result-item .answer-info { font-size: 0.82rem; font-weight: 600; color: #aaa; }
  .result-item.bad .answer-info { color: var(--primary); }

  .hidden { display: none !important; }
</style>
</head>
<body>

<!-- SETUP SCREEN -->
<div id="setup-screen">
  <h1>üåü Verb Practice</h1>
  <p class="subtitle">Learn verbs the fun way!</p>

  <div class="card">
    <label for="word-input">Enter your verb pairs</label>
    <small>One pair per line: present, past, Hebrew translation (comma separated)</small>
    <textarea id="word-input" placeholder="spend, spent, ◊ú◊î◊ï◊¶◊ô◊ê&#10;buy, bought, ◊ú◊ß◊†◊ï◊™&#10;run, ran, ◊ú◊®◊ï◊•&#10;go, went, ◊ú◊ú◊õ◊™&#10;eat, ate, ◊ú◊ê◊õ◊ï◊ú"></textarea>
    <div class="example-box">
      <strong>Examples:</strong><br>
      spend, spent, ◊ú◊î◊ï◊¶◊ô◊ê<br>
      buy, bought, ◊ú◊ß◊†◊ï◊™<br>
      run, ran, ◊ú◊®◊ï◊•<br>
      <br>
      <em>Hebrew translation is optional ‚Äî you can leave it out.</em>
    </div>
    <button class="btn btn-start" onclick="startPractice()">‚ñ∂ Start Practice!</button>
  </div>
</div>

<!-- PRACTICE SCREEN -->
<div id="practice-screen">
  <h1>üåü Verb Practice</h1>

  <div class="card">
    <div class="progress-label" id="progress-label">1 / 5</div>
    <div class="progress-bar-wrap">
      <div class="progress-bar-fill" id="progress-bar" style="width:0%"></div>
    </div>

    <div class="verb-display">
      <div class="listen-label">Listen carefully üëÇ</div>
      <div class="verb-word" id="display-verb">spend</div>
      <div class="hebrew-hint" id="hebrew-hint"></div>
      <button class="speak-btn" onclick="speakCurrent()">
        <span class="icon">üîä</span> Hear it again
      </button>
    </div>

    <div class="field-group">
      <label>Present form <span>‚úèÔ∏è Type what you heard</span></label>
      <input type="text" class="answer-input" id="present-input" placeholder="Type the present verb..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
      <div class="feedback" id="present-feedback"></div>
    </div>

    <div class="field-group">
      <label>Past form <span>‚è™ What happened yesterday?</span></label>
      <input type="text" class="answer-input" id="past-input" placeholder="Type the past verb..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
      <div class="feedback" id="past-feedback"></div>
    </div>

    <div class="btn-row">
      <button class="btn btn-blue" onclick="checkAnswer()" style="flex:2">‚úÖ Check!</button>
      <button class="btn btn-gray" onclick="skipVerb()" style="flex:1">Skip ‚Üí</button>
    </div>
    <button class="btn btn-gray" onclick="confirmRestart()" style="margin-top:12px;font-size:0.95rem">üîÑ Restart from beginning</button>
  </div>
</div>

<!-- RESULTS SCREEN -->
<div id="results-screen">
  <h1>üåü Well Done!</h1>
  <div class="card">
    <div class="trophy" id="trophy-emoji">üèÜ</div>
    <div class="score-big" id="score-text">5 / 5</div>
    <div class="score-sub" id="score-sub">Perfect score!</div>

    <div class="result-list" id="result-list"></div>

    <button class="btn btn-green" onclick="restartSame()" style="margin-bottom:12px">üîÑ Try Again (same list)</button>
    <button class="btn btn-gray" onclick="goHome()">üìù Change word list</button>
  </div>
</div>

<script>
  let verbs = [];
  let current = 0;
  let score = 0;
  let results = [];
  let checked = false;

  function parseVerbs(text) {
    return text.split('\n')
      .map(line => line.trim())
      .filter(line => line.length > 0)
      .map(line => {
        // split by comma or multiple spaces
        let parts = line.split(/,\s*|\s{2,}|\t/).map(p => p.trim()).filter(Boolean);
        if (parts.length === 1) {
          // try splitting by single space
          parts = line.split(/\s+/).map(p => p.trim());
        }
        return parts.length >= 2 ? { present: parts[0].toLowerCase(), past: parts[1].toLowerCase(), hebrew: parts[2] || '' } : null;
      })
      .filter(Boolean);
  }

  function startPractice() {
    const input = document.getElementById('word-input').value;
    verbs = parseVerbs(input);
    if (verbs.length === 0) {
      alert('Please enter at least one verb pair!\nExample: spend, spent');
      return;
    }
    // shuffle
    verbs = verbs.sort(() => Math.random() - 0.5);
    current = 0;
    score = 0;
    results = [];
    checked = false;

    document.getElementById('setup-screen').style.display = 'none';
    document.getElementById('results-screen').style.display = 'none';
    document.getElementById('practice-screen').style.display = 'block';

    loadVerb();
  }

  function loadVerb() {
    checked = false;
    const verb = verbs[current];
    const verbEl = document.getElementById('display-verb');
    verbEl.textContent = verb.present;
    verbEl.style.color = 'transparent';
    verbEl.style.background = '#ffd0d0';
    document.getElementById('hebrew-hint').textContent = verb.hebrew ? `üáÆüá± ${verb.hebrew}` : '';
    document.getElementById('present-input').value = '';
    document.getElementById('past-input').value = '';
    document.getElementById('present-feedback').textContent = '';
    document.getElementById('past-feedback').textContent = '';
    document.getElementById('present-input').className = 'answer-input';
    document.getElementById('past-input').className = 'answer-input';
    document.getElementById('progress-label').textContent = `${current + 1} / ${verbs.length}`;
    document.getElementById('progress-bar').style.width = `${(current / verbs.length) * 100}%`;

    // auto-speak after short delay
    setTimeout(() => speakCurrent(), 400);
    document.getElementById('present-input').focus();
  }

  function speakCurrent() {
    const verb = verbs[current];
    speak(verb.present);
  }

  function speak(word) {
    if (!window.speechSynthesis) return;
    window.speechSynthesis.cancel();
    const utter = new SpeechSynthesisUtterance(word);
    utter.lang = 'en-US';
    utter.rate = 0.85;
    window.speechSynthesis.speak(utter);
  }

  function checkAnswer() {
    if (checked) { nextVerb(); return; }

    const verb = verbs[current];
    const presentVal = document.getElementById('present-input').value.trim().toLowerCase();
    const pastVal = document.getElementById('past-input').value.trim().toLowerCase();

    const presentOk = presentVal === verb.present;
    const pastOk = pastVal === verb.past;

    const pIn = document.getElementById('present-input');
    const paIn = document.getElementById('past-input');
    const pFb = document.getElementById('present-feedback');
    const paFb = document.getElementById('past-feedback');

    if (presentOk) {
      pIn.className = 'answer-input correct';
      pFb.textContent = '‚úÖ Correct!';
      pFb.className = 'feedback correct';
    } else {
      pIn.className = 'answer-input wrong';
      pFb.textContent = `‚ùå Answer: ${verb.present}`;
      pFb.className = 'feedback wrong';
      pIn.value = verb.present;
    }

    if (pastOk) {
      paIn.className = 'answer-input correct';
      paFb.textContent = '‚úÖ Correct!';
      paFb.className = 'feedback correct';
    } else {
      paIn.className = 'answer-input wrong';
      paFb.textContent = `‚ùå Answer: ${verb.past}`;
      paFb.className = 'feedback wrong';
      paIn.value = verb.past;
    }

    if (presentOk && pastOk) score++;

    results.push({
      present: verb.present,
      past: verb.past,
      hebrew: verb.hebrew,
      presentOk,
      pastOk,
      presentGiven: presentVal,
      pastGiven: pastVal
    });

    checked = true;

    // reveal the word
    document.getElementById('display-verb').style.color = 'var(--primary)';
    document.getElementById('display-verb').style.background = 'transparent';

    // change button label
    document.querySelector('.btn-blue').textContent = current < verbs.length - 1 ? '‚û° Next' : 'üèÅ Finish!';
  }

  function skipVerb() {
    if (!checked) {
      const verb = verbs[current];
      results.push({ present: verb.present, past: verb.past, hebrew: verb.hebrew, presentOk: false, pastOk: false, skipped: true });
    }
    nextVerb();
  }

  function nextVerb() {
    current++;
    if (current >= verbs.length) {
      showResults();
    } else {
      document.querySelector('.btn-blue').textContent = '‚úÖ Check!';
      loadVerb();
    }
  }

  function showResults() {
    document.getElementById('practice-screen').style.display = 'none';
    document.getElementById('results-screen').style.display = 'block';

    const total = verbs.length;
    const pct = score / total;

    document.getElementById('score-text').textContent = `${score} / ${total}`;

    let trophy = 'üåü', sub = '';
    if (pct === 1) { trophy = 'üèÜ'; sub = 'Perfect score! Amazing!'; }
    else if (pct >= 0.8) { trophy = 'ü•á'; sub = 'Great job! Almost perfect!'; }
    else if (pct >= 0.6) { trophy = 'ü•à'; sub = 'Good effort! Keep practicing!'; }
    else { trophy = 'üí™'; sub = 'Keep trying, you\'ll get it!'; }

    document.getElementById('trophy-emoji').textContent = trophy;
    document.getElementById('score-sub').textContent = sub;

    const list = document.getElementById('result-list');
    list.innerHTML = results.map(r => {
      const ok = r.presentOk && r.pastOk;
      return `<div class="result-item ${ok ? 'ok' : 'bad'}">
        <span class="ri">${ok ? '‚úÖ' : '‚ùå'}</span>
        <div class="verb-pair">
          <div>${r.present} ‚Üí ${r.past}${r.hebrew ? ` <span style="color:var(--purple);font-size:0.9rem">(${r.hebrew})</span>` : ''}</div>
          ${!ok ? `<div class="answer-info">You wrote: ${r.presentGiven || '(skipped)'} ‚Üí ${r.pastGiven || '(skipped)'}</div>` : ''}
        </div>
      </div>`;
    }).join('');
  }

  function confirmRestart() {
    if (confirm('Start over from the beginning?')) {
      restartSame();
    }
  }

  function restartSame() {
    verbs = verbs.sort(() => Math.random() - 0.5);
    current = 0;
    score = 0;
    results = [];
    checked = false;
    document.getElementById('results-screen').style.display = 'none';
    document.getElementById('practice-screen').style.display = 'block';
    document.querySelector('.btn-blue').textContent = '‚úÖ Check!';
    loadVerb();
  }

  function goHome() {
    document.getElementById('results-screen').style.display = 'none';
    document.getElementById('setup-screen').style.display = 'block';
  }

  // allow Enter key to submit
  document.addEventListener('keydown', e => {
    if (e.key === 'Enter' && document.getElementById('practice-screen').style.display === 'block') {
      if (checked) nextVerb();
      else checkAnswer();
    }
  });
</script>
</body>
</html>
